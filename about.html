<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="with=device-width", initial-scale="1.0">
    <!--helps make the website responsive-->
    <title>CARS</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!--this is the link of the google font chosen aka fonts.google.com(poppins)!! Please see luna if you want the font to change!!!-->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;600;700&family=Rubik+Bubbles&display=swap" rel="stylesheet">
</head>
<body>
  <section class="header">
      <nav>
          <a href="index.html"><img src="images/logo.png"></a>
          <div class="nav-links">
              <ul>
                <li><a href="index.html">HOME</a></li>
                <li><a href="about.html">ABOUT</a></li>
                <li><a href="inventory.html">INVENTORY</a></li>
                <!--dont touch the link below please-->
                <li><a href="https://cars.nighthawkcodingsociety.com/dealership">DEALERSHIPS</a></li>
                <li><a href="cars.html">SEARCH</a></li>
                <li><a href="addcar.html">ADD A CAR</a></li>
                <li><a href="suggestions.html">SUGGESTIONS</a></li>

                  </ul>
                  <script>
                  var loader = document.getElementById("preloader");
                  window.addEventListener("load", function(){
                      loader.style.display = "none";
                  })
              </script>
          </div>
      </nav>
      <!--title part of the page please change maybe later so it doesn't look like the rest of the site-->
    <div class = "sub-header">
        <h1 style="text-align: center; color: rgb(114, 142, 167);">About Us</h1>
    </div>
    <!--ad caption later about our website-->
    <div class = "sub-header h1">
        <p> Welcome to our car page!
        </p>
    </div>
    <div class="bottom"></div>

</section>
      <!-- Begin Page Content-->

<!--ab us-->
<!--the classes can be found in the scss - luna-->
<!--please do not change :)-->
<section class="about-us">


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--padding is king i need to use it more-->
  <style>
    
    body{
      display:flex;
      flex-direction: column;
      align-items: center;
      background-color:rgb(158, 158, 171);
    }

    input{
      height:30px;
      width: 200px;
      margin-bottom:15px;
    }

    ul{
      font-size:30px;
    }
  </style>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<table>
<!--table which displays of the user data and information aka the sub list:/-->
<h1>Join our Subscriber List</h1>
  <thead>
    <tr>
      <th>Subscriber</th>
    </tr>
  </thead>
  <tbody id="result">

  </tbody>
</table>
<!--where the user insert's their info (need to add a class bc someones user sign in boxes is affecting all of input boxes :()-->
<form action="javascript:create_user()">
  <p><label>
    Subscriber:
    <input type="text" name="uid" id="uid" maxlength="3" placeholder="First and Last Initial 'A.B'" required>
  </label>
<p>
  <!--holy grail button to make them the sub :< :)-->
  <button>Create</button>
</p>
  </p>
</form>

<script>
  const resultContainer=document.getElementById("result");
  const url="https://cars.nighthawkcodingsociety.com/api/users"
  const create_fetch=url+'/create';
  const read_fetch=url+'/';

  read_users();
// the CRUDDDDDD this is the GET
  function read_users(){
    const read_options={
      method:'GET',
      mode:'cors',
      cache:'default',
      credentials:'omit',
      headers:{
        'Content-Type': 'application/json'
      },
    };
    //fetching and making the element in the table 
    fetch(read_fetch, read_options)
    .then(response => {
    if (response.status !==200){
      const errorMsg = 'Database read error:'+response.status;
      console.log(errorMsg);
      //will affect the td and tr in the tables bro
      const tr=document.createElement("tr");
      const td=document.createElement("td");
      td.innerHTML=errorMsg;
      tr.appendChild(td);
      resultContainer.appendChild(tr);
      return;
    }
    response.json().then(data =>{
    console.log(data);
            for (let row in data) {
              console.log(data[row]);
              add_row(data[row]);
            }
        })
    
  })
.catch(err => {
  consol.error(err);
  const tr=document.createElement("tr");
  const td=document.createElement("td");
  td.innerHTML=err;
  tr.appendChild(td);
  resultContainer.appendChild(tr)
});
 }
//making the user for the table
 function create_user(){
  const body={
    uid: document.getElementById("uid").value
  };
  //always got to post-luna
  const requestOptions={
    method:'POST',
    body:JSON.stringify(body),
    headers:{
      "content-type": "application/json",
      'Authorization': 'Bearer my-token',
    },
  };
//fetch fetch !!!!
  fetch(create_fetch, requestOptions)
  .then(response => {
    if(response.status !==200){
      const errorMsg='Database create error:'+response.status;
      console.log(errorMsg);
      const tr=document.createElement("tr");
      const td=document.createElement("td");
      td.innerHTML=errorMsg;
      tr.appendChild(td);
      resultContainer.appendChild(tr);
      return;
    }
    //adding rows for the better of the world
    response.json().then(data =>{
      console.log(data);
      add_row(data);
    })
  })
 }
//adding the elements aka the subs names or initials into the table 
 function add_row(data){
  const tr=document.createElement("tr");
  const uid=document.createElement("td");

  uid.innerHTML=data.uid;

  tr.appendChild(uid);
//yayayayyaya
  resultContainer.appendChild(tr);
 }

</script>

</html>
<!---------the preloader by the Ethan Tran----------------------->
        <div id ="preloader"></div>
        <script>
            var loader = document.getElementById("preloader");
            window.addEventListener("load", function(){
                loader.style.display = "none";
            })
     </script>
</section>
</body>
<!-------------------------------->
<section class="about-col">
<h1>Join Our Subscriber List</h1>
<!--delete this poop later-->
<!--if (response.status !==200){
  const errorMsg = 'Database read error:'+response.status;
  console.log(errorMsg);
  //will affect the td and tr in the tables bro
  const tr=document.createElement("tr");
  const td=document.createElement("td");
  td.innerHTML=errorMsg;
  tr.appendChild(td);
  resultContainer.appendChild(tr);-->